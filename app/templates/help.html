{% extends "layout.html" %}	
{% block body %}
<div class="text_body">
	<h2>
        <a href="{{ url_for('create') }}">
            <img src = "{{ url_for('static', filename='create_field.svg') }}">
        </a>
		Register fields and trees
	</h2>
		<h3 id="locations">Locations</h3>
			<p>
                Countries, Regions and Farms provide location context for <a href="#fields">Fields</a>
                , a core component of the BreedCAFS data model. The Farm represents a large farm or research facility
				where multiple fields and/or growth environments are available.
			</p>
		<h3 id="fields">Fields</h3>
			<p>
				The Field represents a collection of <a href="#trees">Trees</a> under common non-experimental conditions.
                It is also the largest unit in the BreedCAFS data model to which records may be attributed.

                In a typical farm setting the Field will be a single field,
				although in BreedCAFS on-farm trials it may represent an entire small-holder farm.
				In research facilities with controlled growth environments, the Field will likely be a glasshouse
                or a collection of chambers.
			</p>
			<p>
                To facilitate the data submission and retrieval process,
				each Field is registered to a Farm and assigned a unique identifier (UID).
				For Fields this UID is an integer (e.g. "1") that increments with each additional field in the database.
			</p>
		<h3  id="blocks">Blocks</h3>
			<p>
				Blocked experimental designs are often necessary to account for conditions (nuisance factors) that vary
				within a given field. Similarly, in controlled growth experiments such variation is often found
				between growth chambers. To facilitate analyses in such experimental designs,
                <a href="#trees">Trees</a> can be optionally assigned to Blocks within a <a href="#fields">Field</a>.
			</p>
			<p>
				Blocks are assigned a UID that is incremented from the <a href="#fields">Field</a> UID.
				As an example, "1_B2" is the UID for the second block registered within the <a href="#fields">Field</a>
                with UID 1. Blocks are best added first so that subsequent <a href="#trees">Trees</a>
                may be registered directly into a Block.
                However, <a href="#trees">Trees</a> may be later assigned to a
                registered Block by recording the block ID number in the "Assign to block" condition.
			</p>
		<h3 id="trees">Trees</h3>
			<p>
				Trees are registered within a <a href="#fields">Field</a> and optionally within a <a href="#blocks">Block</a>.
                Each Tree is assigned a UID that increments from the <a href="#fields">Field</a> UID.
				As an example, "1_T2" is the UID for the second tree registered within the <a href="#fields">Field</a> with UID 1.
			</p>
            <p>
                In registering Trees you are be provided a BreedCAFS template listing the Tree UIDs and allowing you
                to record details for later <a href="#upload">submission</a>. These templates can also be generated on the
                <a href="#record">Record</a> page.
            </p>

	<h2>
        <a href="{{ url_for('collect') }}">
            <img src = "{{ url_for('static', filename='collect.svg') }}">
        </a>
		Register samples
	</h2>
        <h3>
            Items
        </h3>
            <p>
                If each sample to be collected is representative of a <a href="#fields">Field</a>
                or <a href="#trees">Tree</a> then select the corresponding level.
            </p>
            <p>
                If each sample is representative of a collection of <a href="#trees">Trees</a>
                (i.e. pooled) then select "Field" and later associate each sample with a list of Tree IDs
                by recording the "Assign to trees" condition.
            </p>
            <p>
                For sub-sampling (i.e. splitting a sample into multiple representative samples),
                select "Sample". This is designed to support distributing samples among labs
                and where samples may be split for different post-harvest processing procedures.
                New IDs are generated but the association with the original sample is preserved in the database.
            </p>
        <h3>
            Filters
        </h3>
            <p>
                The filters allow you to select specific items to sample (Fields/Trees/Samples).
                Your selection here will update the <a href="#selection">selection</a> below.
            </p>
        <h3>
            Selection
        </h3>
            <p>
                Here you can see the number of items selected to sample. You can optionally specify
                the number of samples to register per item (default is 1).
            </p>
            <p>
                When you register samples you are provided a BreedCAFS template detailing the sample UIDs
                and allowing you to record details for later <a href="#upload">submission</a>.
                These templates can also be generated on the <a href="#record">Record</a> page.
            </p>
    <h2 id="record">
        <a href="{{ url_for('record') }}">
            <img src = "{{ url_for('static', filename='record.svg') }}">
        </a>
        Record data
    </h2>
    <h2 id="upload">
        <a href="{{ url_for('upload') }}">
            <img src = "{{ url_for('static', filename='upload.svg') }}">
        </a>
        Upload data
    </h2>
	<h2 id="download">
		<a href="{{ url_for('download') }}">
			<img src = "{{ url_for('static', filename='download_espresso.svg') }}">
		</a>
		Retrieve data
	</h2>
		<p>
			Retrieve data submitted by your affiliated partners, filtering by location and time period.
			First select a level of data to retrieve (field/block/tree/branch/leaf or sample)
			Then further select specific traits
		</p>
		<p>
			Both database format (single row per item/time/trait) and table format (single row per item)
			are provided.
			The database format contains additional information about who submitted the data (user and partner)
			as well as when, where and by whom (if using Field Book) this data was collected.
			The table format may be useful in simple cases although please note:
			when multiple data points are found for a single trait, these will be returned
			as a list within a single cell of the table.
		</p>
	<h2>
        <a href="{{ url_for('user_page') }}">
            <img src = "{{ url_for('static', filename='user.svg') }}">
        </a>
		Manage your account
	</h2>
		<p> This page allows you to select and see the status of your affiliations
			that provide access to submitted data.
		</p>
		<p>
			Your primary affiliation (marked with a *) is the partner you selected during registration.
			This affiliation may not be removed and all data you submit will be accessible
			to users with confirmed affiliations to this partner.
		</p>
		<p>
			You may request/remove additional affiliations with this form by selecting the relevant partners
			then clicking 'Add/remove affiliations'.
			The partner administrator (see below) can then confirm this affiliation,
			providing access to data submitted by users that registered with this institute
			(i.e. have this as their primary affiliation).
		<p><i>Partner administrator access is granted by a Global Administrator.</i></p>
	{% if ('global_admin' in session.access) or ('partner_admin' in session.access) %}
	<h2>
		<a href="{{ url_for('admin') }}">
            <img src = "{{ url_for('static', filename='admin.svg') }}">
        </a>
        Manage your team
	</h2>
		<p>
			Only administrators have access to this page.
			Here you can add new emails to the authorised list, allowing registration by new team members.
			You can also confirm/unconfirm registered users,
			providing/denying access to the data through the download portal.
		</p>
	{% endif %}
	</div>





{% endblock %}
