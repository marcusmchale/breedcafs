{% extends "layout.html" %}	
{% block body %}
<div class="text_body">
	<h2>
		Register fields and trees with
		<a href="{{ url_for('create') }}"><img src = "{{ url_for('static', filename='create_field.svg') }}"></a>
	</h2>
		<h3>Locations</h3>
			<p>
				Countries, regions and farms provide context for submission and retrieval of data.
				The "farm" represents a large farm/research facility
				where multiple fields/growth environments are available.
			</p>
		<h3>Fields</h3>
			<p>
				The field is the experimental unit against which the "field" level trait data is recorded.
				In a typical farm setting this will be a single field,
				although it may represent an entire small-holder farm.
				In research facilities with controlled growth environments,
				the field will be a collection of chambers/glasshouses.
			</p>
			<p>
				To facilitate the data submission and retrieval process,
				each field is registered to a Country, Region and Farm  and assigned a unique identifier (UID).
				For fields this UID is an integer (e.g. "1") that increments with each additional field in the database.
			</p>
		<h3>Blocks</h3>
			<p>
				Blocked experimental designs are often necessary to account for conditions (nuisance factors) that vary
				within a given field. Similarly, in controlled growth experiments such variation is often also found
				between growth chambers. To facilitate registering data with such experimental designs, "blocks" can be
				registered within each field and trait data can then be recorded against these units. Accordingly,
				the "block" level traits are often identical to those at the "field" level.
			</p>
			<p>
				Blocks are assigned a UID that is incremented from the field UID.
				As an example, "1_B2" is the UID for the second block registered within the field with UID 1.
				Blocks are best added here so that subsequent trees may be registered directly into a block.
				However, the block UID may also be entered per tree through the "Record" and "Upload" procedure.
			</p>
		<h3>Trees</h3>
			<p>
				The tree is the experimental unit against which the "tree" level trait data is recorded.
				These traits include a number of different types of value, including not just
				experimental data, but also treatments applied and contextual information such as custom identifiers.
			</p>
			<p>
				Each tree is registered within a field (optionally within a block)
				and assigned a UID that increments from the field UID.
				As an example, "1_T2" is the UID for the second tree registered within the field with UID 1.
			</p>
	<h2>
		Generate templates to record data with
		<a href="{{ url_for('collect') }}"><img src = "{{ url_for('static', filename='collect.svg') }}"></a>
	</h2>
		<h3>Data formats</h3>
			<p>
				The database tools support both traditional tables
				and the Field Book app for data collection and submission.
			</p>
			<h4>Tables</h4>
				<p>
					Tables are generated in "comma separated values" (.csv) files.
					These are suited to import into spreadsheet software such as Microsoft Excel.
				</p>
				<p>
					The first columns of each table will provide contextual information;
					Country, Region, Farm, Field etc.
					The last of these will be UID,
					the unique identifier of the item to which the following values correspond.
					The next two columns require the input of the date (formatted as YYYY-MM-DD, e.g. 2018-01-01)
					and the time (formatted as HH:MM in 24 hour time, e.g. 13:00).
					Subsequent columns contain a field label corresponding to a trait for which data can be entered.
				</p>
				<p>
					An additional file is generated along with this table template. This "details" file describes
					the types of values that are accepted for the traits you have selected.
				</p>
			<h4>Field Book</h4>
				<p>
					To assist field data collection and ensure standardised reporting,
					the BreedCAFS database tools support use of the
					<a href="http://wheatgenetics.org/field-book">Field Book</a> app for Android mobile devices.
				</p>
				<p>
					To collect data with Field-Book you need two files, one that describes the "fields" (a .csv file),
					and another that describes the traits to be measured (a .trt file).
					Both of these files (specific to the level of data; field, block, tree, branch, leaf or sample)
					are generated by this site.
				</p>
				<p>
					For further guidance on using Field Book please see the
					<a href="{{ url_for('field_book_help') }}">Field Book help</a> page
				</p>
			<h4>Trait selection</h4>
				<p>
					First select the level of the traits then explore the expanding groups of traits
					to select those for which you are interested in recording data.
				</p>
			<h4>Location</h4>
				<p>
					Next you will be able to filter by location to select the appropriate items at that level
					(e.g. trees for tree level traits).
				</p>
			<h4>File type</h4>
				<p>
					Select the desired format for the template files (Table or Field Book as described above) and click
					to generate these files.
				</p>

	<h2>
		Retrieve data with
		<a href="{{ url_for('download') }}">
			<img src = "{{ url_for('static', filename='download_espresso.svg') }}">
		</a>
	</h2>
		<p>
			Retrieve data submitted by your affiliated partners, filtering by location and time period.
			First select a level of data to retrieve (field/block/tree/branch/leaf or sample)
			Then further select specific traits
		</p>
		<p>
			Both database format (single row per item/time/trait) and table format (single row per item)
			are provided.
			The database format contains additional information about who submitted the data (user and partner)
			as well as when, where and by whom (if using Field Book) this data was collected.
			The table format may be useful in simple cases although please note:
			when multiple data points are found for a single trait, these will be returned
			as a list within a single cell of the table.
		</p>
	<h2>
		Manage your account with
		<a href="{{ url_for('user_page') }}"><img src = "{{ url_for('static', filename='user.svg') }}"></a>
	</h2>
		<p> This page allows you to select and see the status of your affiliations
			that provide access to submitted data.
		</p>
		<p>
			Your primary affiliation (marked with a *) is the partner you selected during registration.
			This affiliation may not be removed and all data you submit will be accessible
			to users with confirmed affiliations to this partner.
		</p>
		<p>
			You may request/remove additional affiliations with this form by selecting the relevant partners
			then clicking 'Add/remove affiliations'.
			The partner administrator (see below) can then confirm this affiliation,
			providing access to data submitted by users that registered with this institute
			(i.e. have this as their primary affiliation).
		<p><i>Partner administrator access is granted by a Global Administrator.</i></p>
	{% if ('global_admin' in session.access) or ('partner_admin' in session.access) %}
	<h2>
		Manage your team with
		<a href="{{ url_for('admin') }}"><img src = "{{ url_for('static', filename='admin.svg') }}"></a>
	</h2>
		<p>
			Only administrators have access to this page.
			Here you can add new emails to the authorised list, allowing registration by new team members.
			You can also confirm/unconfirm registered users,
			providing/denying access to the data through the download portal.
		</p>
	{% endif %}
	</div>





{% endblock %}
